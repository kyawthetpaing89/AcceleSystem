@{
    ViewBag.Title = "TourokuProject_List";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section Styles{
    @*<link rel="stylesheet" href="@Url.Content(" ~/ElaAdmin/assets/css/lib/datatable/dataTables.bootstrap.min.css")" />*@
    <link rel="stylesheet" type="text/css" href="@Url.Content("~/Content/bootstrap-textbox.css")" />
}
<div class="card">
    <div class="row">
        <div class="col-lg-5">
            <div class="card-body card-block">
                <div class="row form-group">
                    <div class="col col-md-12">
                        <button id="btnAdd" onclick="btnAddClick()" class="btn" tabindex="38" style="background-color:#1a8cff; color:azure; border:1px solid transparent; border-radius: 3px; margin-right: 20px;">
                            プロジェクト追加
                        </button>
                        <button id="btnAdd" onclick="btnAddClick()" class="btn" tabindex="38" style="background-color:white; color:#1a8cff; border-radius:3px; border: 1px solid transparent; border-color:#1a8cff; margin-right: 20px;">
                            品番登録
                        </button>

                        <button id="btnAdd" onclick="btnAddClick()" class="btn" tabindex="38" style="background-color:white; color:black; border-radius:3px; border: 1px solid transparent; border-color:black;">
                            CSV
                        </button>
                        <div id="registration" style="padding-top: 1.8rem!important;">
                            <div class="">
                                <h4 class=" hr-text text-center">経費設定登録</h4>
                            </div>
                            <div class="pt-3 md-form" style="padding-top:1.2rem!important;">
                                <div class="col-md-12" style="padding-left:0px;">
                                    <div class="text-s text-custom1 text-uppercase mb-1">
                                        <label id="text" style="padding-right: 24px;">ブランド名</label>
                                        <input type="text" tabindex="1" class="text-line text-left" id="BrandCD" name="brandcd" maxlength="6" onkeypress="EnterKeyPress(event,this,true,1,4,0)" required placeholder="入力" style="width:110px;">
                                        <input type="text" tabindex="2" class="text-line text-left" id="BrandName" name="brandname" maxlength="40" onkeypress="EnterKeyPress(event,this,true,0,4,0)" required placeholder="入力" style="width:110px;">

                                    </div>
                                </div>
                            </div>

                            <div class="pt-3 md-form" style="padding-top:1.2rem!important;">
                                <div class="col-md-12" style="padding-left:0px;">
                                    <div class="text-s text-custom1 text-uppercase mb-1">
                                        <label class="text" style="padding-right:20px;">シーズン</label>
                                        <input type="checkbox" tabindex="3" id="degreeyear" name="check">
                                        <label style="padding-right:50px;">度年</label>
                                        <input type="checkbox" id="SS" name="">
                                        <label style="padding-right:50px;">SS</label>
                                        <input type="checkbox" id="FW" name="">
                                        <label>FW</label>

                                    </div>
                                </div>
                            </div>

                            <div class="pt-3 md-form" style="padding-top:0.5rem!important;">
                                <div class="col-md-12" style="padding-left:0px;">
                                    <div class="text-s text-custom1 text-uppercase mb-1">
                                        <label id="text" style="padding-right: 73px;">年度</label>
                                        <input type="text" tabindex="4" class="text-line text-left" id="Year" name="year" maxlength="6" onkeypress="EnterKeyPress(event,this,true,1,4,0)" required placeholder="入力" style="width:220px;">
                                    </div>
                                </div>
                            </div>

                            <div class="pt-3 md-form" style="padding-top:1.2rem!important;">
                                <div class="col-md-12" style="padding-left:0px;">
                                    <div class="text-s text-custom1 text-uppercase mb-1">
                                        <label id="text" style="padding-right: 12px;">プロジェクト</label>
                                        <input type="text" tabindex="5" class="text-line text-left" id="ProjectCD" name="projectcd" maxlength="6" onkeypress="EnterKeyPress(event,this,true,1,4,0)" required placeholder="入力" style="width:105px;">
                                        <input type="text" tabindex="6" class="text-line text-left" id="ProjectName" name="projectname" maxlength="40" onkeypress="EnterKeyPress(event,this,true,0,4,0)" required placeholder="入力" style="width:105px;">

                                    </div>
                                </div>
                            </div>

                            <div class="pt-3 md-form" style="padding-top:1.2rem!important;">
                                <div class="col-md-12" style="padding-left:0px;">
                                    <div class="text-s text-custom1 text-uppercase mb-1">
                                        <label id="text" style="padding-right: 38px;">予定期間</label>
                                        <input type="text" tabindex="7" class="text-line text-left" id="PeriodStart" name="periodstart" maxlength="6" onkeypress="EnterKeyPress(event,this,true,1,4,0)" required placeholder="入力" style="width:110px;">
                                        <input type="text" tabindex="8" class="text-line text-left" id="PeriodEnd" name="periodend" maxlength="40" onkeypress="EnterKeyPress(event,this,true,0,4,0)" required placeholder="入力" style="width:110px;">

                                    </div>
                                </div>
                            </div>

                            <div class="pt-3 md-form" style="padding-top:1.2rem!important;">
                                <div class="col-md-12" style="padding-left:0px;">
                                    <div class="text-s text-custom1 text-uppercase mb-1">
                                        <label id="text" style="padding-right: 50px;">責任者</label>
                                        <input type="text" tabindex="9" class="text-line text-left" id="ProjectManager" name="projectmanager" maxlength="6" onkeypress="EnterKeyPress(event,this,true,1,4,0)" required placeholder="入力" style="width:113px;">
                                        <input type="text" tabindex="10" class="text-line text-left" id="UserName" name="username" maxlength="40" onkeypress="EnterKeyPress(event,this,true,0,4,0)" required placeholder="入力" style="width:113px;">

                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12" style="padding-left:0px; padding-top:2rem;">
                                <div class="text-s text-custom1 text-uppercase mb-1">
                                    <button id="btnSave" tabindex="11" onclick="btnSaveClick()" class="btn btn-dark col-xl-4 text-center" style="float:right; width:100px;">登録</button>
                                    &nbsp;&nbsp;&nbsp;&nbsp;

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-5">
            <div class="card-body card-block">
                <table id="tblProject" class="tb1 col-sm-12" style="padding-left:0px;">
                    <thead>
                        @*<tr>
                            <th>納品日</th>
                            <th>ブランド</th>
                            <th>シーズン</th>
                            <th>年度</th>
                        </tr>
                        <tr>
                            <th>プロジェクト</th>
                        </tr>
                        <tr>
                            <th>品番</th>
                            <th></th>
                            <th>生産数</th>
                            <th>納品数</th>
                        </tr>*@
                         <tr>
                            <td>ブランドコード</td>
                            <td>ブランド名</td>
                            <td>シーズン</td>
                            <td>年度</td>
                            <td>プロジェクトコード</td>
                            <td>プロジェクト名</td>
                            <td>予定期間</td>
                            <td>予定期間</td>
                            <td>総生産数</td>
                            <td>総金額</td>

                        </tr>
                    </thead>

                </table>
            </div>

        </div>
        <div class="col-lg-2"></div>
    </div>

</div>

@section Scripts{
    <script type="text/javascript">
    $(document).ready(function () {
        $("#formtitle").text("プロジェクト検索");
        $("#BrandCD").focus();
        GetProject();
    });

    function GetProject() {
        var Tmodel = {
            BrandCD: $('#BrandCD').val(),
            BrandName: $('#BrandName').val(),
            Year: $('#Year').val(),
            ProjectCD: $('#ProjectCD').val(),
            ProjectName: $('#ProjectName').val(),
            PeriodStart: $('#PeriodStart').val(),
            PeriodEnd: $('#PeriodEnd').val(),
            ProjectManager: $('#ProjectManager').val(),
            UserName: $('#UserName').val(),
        };

        if ($('#degreeyear').is(':checked'))
            Tmodel.Season = "1";
        else if ($('#SS').is(':checked'))
            Tmodel.Season = "2";
        else Tmodel.Season = "3";

        $.ajax({
            type: "Post",
            url: "@Url.Action("M_Project_Select_List", "api/TourokuProjectApi")",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            data: JSON.stringify(Tmodel),
            headers:
            {
                Authorization: 'Basic ' + btoa('Capital_MM' + ':' + 'CKM12345!')
            },
            success: function (response) {
                BindTable(response);
            }
        });
    }

    function BindTable(response) {
        table = $('#tblProject').DataTable({

            data: JSON.parse(response),
            "bFilter": false,
            "bLengthChange": false,
            "bInfo": false,
            destroy: true,
            "columns": [
                {
                    "data": null,
                    className: "Border1",
                    render: function (data, type, row) {
                        return '<b><label>' + data.BrandCD + '</label></b><br/><label>' + data.ProjectCD + '</label></b><br/><label>' + data.PeriodStart + '</label>';
                    }
                },
                {
                    "data": null,
                    className: "Border2",
                    render: function (data, type, row) {
                        return '<b><label>' + data.BrandName + '</label></b><br/><label>' + data.ProjectName + '</label></b><br/><label>' + data.PeriodEnd + '</label>';
                    }
                },
                {
                    "data": null,
                    className: "Border3",
                    render: function (data, type, row) {
                        return '<b><label>' + data.Season + '</label></b><br/><label>' + '' + '</label></b><br/><label>' + data.Production + '</label>';
                    }
                },

                {
                    "data": null,
                    className: "Border4",
                    render: function (data, type, row) {
                        return '<b><label>' + data.SalesPrice + '</label></b><br/><label>' + data.PeriodEnd + '</label>';
                    }
                },

                {
                    "data": null,
                    className: "Border5",
                    render: function (data, type, row) {
                        return '<label><a href="#" onClick="btnEditClick(\'' + data.BrandCD + '\')" style="color:blue">編集</a></label><br/><label><a href="#" onClick="btnDelClick(\'' + data.BrandCD + '\')" style="color:red">削除</a></label> <br/> <label><a href="#" onClick="btnCopyClick(\'' + data.BrandCD + '\')" style="color:green">編集</a></label><br/>';
                    }
                },
            ],
            "drawCallback": function (settings) {
                $("#tblProject thead").remove();
            }
        });

    }

    function btnAddClick() {
        location.href = '@Url.Action("TourokuProject_Entry", "Project")?Mode=New'
    }

    function btnEditClick(BrandCD) {
        location.href = '@Url.Action("TourokuProject_Entry", "Project")?BrandCD=' + BrandCD + '&Mode=Edit';
    }

    function btnDelClick(BrandCD) {
        location.href = '@Url.Action("TourokuProject_Entry", "Project")?BrandCD=' + BrandCD + '&Mode=Delete';
    }
    </script>

    @*<script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/datatables.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/dataTables.bootstrap.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/dataTables.buttons.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/buttons.bootstrap.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/jszip.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/vfs_fonts.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/buttons.html5.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/buttons.print.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/lib/data-table/buttons.colVis.min.js")"></script>
        <script src="@Url.Content(" ~/ElaAdmin/assets/js/init/datatables-init.js")"></script>*@

}